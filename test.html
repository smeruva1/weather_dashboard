<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

    <!-- Search City  -->
    <form id="Search-City-form">
      <label for="Search-City-input">Search city</label>
      <input type="text" id="Search-City-input">
      <br>

      <!-- Button triggers new City to be added -->
      <input id="add-city" type="submit" value="Search City">
    </form>

    <br>
    <!-- Rendered Buttons will get Dumped Here  -->
    <div id="buttons-view"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
    // Initial array of City
      var cityArray = ["London", "Chicago", "Paris", "New York", "Boston"];
      localStorage.setItem('cityArray', JSON.stringify(cityArray));

// displayCityInfo function re-renders the HTML to display the appropriate content
function displayCityInfo() {

    var city = $(this).attr("city-name");
    console.log(city);
    //call the current weather fun

}

// Function for displaying city data
function renderButtons() {

  var restoreCity = JSON.parse(localStorage.getItem('cityArray'));
  
// Deleting the city prior to adding new cities
// (this is necessary otherwise you will have repeat buttons)
$("#buttons-view").empty();

// Looping through the array of city
for (var i = 0; i < restoreCity.length; i++) {

  // Then dynamicaly generating buttons for each city in the array
  // This code $("<button>") is all jQuery needs to create the beginning and end tag. (<button></button>)
  var a = $("<button>");
  // Adding a class of city-btn to our button
  a.addClass("city-btn");
  // Adding a data-attribute
  a.attr("city-name", restoreCity[i]);
  // Providing the initial button text
  a.text(restoreCity[i]);
  // Adding the button to the buttons-view div
  $("#buttons-view").append(a);
}
}


$("#add-city").on("click", function(event) {
        event.preventDefault();

        var restoreCity = JSON.parse(localStorage.getItem('cityArray'));
        
        // This line grabs the input from the textbox
        var city = $("#Search-City-input").val().trim();

        // Adding movie from the textbox to our array
        restoreCity.push(city);

        localStorage.setItem('cityArray', JSON.stringify(restoreCity));

        // Calling renderButtons which handles the processing of our City array
        renderButtons();
      });


// Adding a click event listener to all elements with a class of "buttons-view"
$(document).on("click", ".city-btn", displayCityInfo);


// Calling the renderButtons function to display the initial buttons
renderButtons();

 </script>
</body>
</html>